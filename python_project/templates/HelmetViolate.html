<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <title>Giám sát mũ bảo hiểm</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
  </head>
  <body>
   <div id="preloader"></div>
    <nav class="navbar navbar-expand-lg navbar-light">
      <div class="container">
        <a class="navbar-brand" href="/">Giám Sát Giao Thông</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample"
                aria-controls="navbarsExample" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarsExample">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item"><a class="nav-link" href="/Hethongcamera1">Làn đường</a></li>
            <li class="nav-item"><a class="nav-link" href="/Hethongcamera2">Mũ bảo hiểm</a></li>
            <li class="nav-item"><a class="nav-link" href="/thongke">Thống kê</a></li>
            <li class="nav-item"><a class="nav-link" href="/bb">Quy định</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="card-body d-flex justify-content-center" style="background-color: white; border-radius: 16px;" class="shadow-soft">
      <div>
        <!-- optional logo removed to avoid broken external URL -->
        <h1
          class="p-3 m-lg-1 badge bg-body-tertiary text-success text-wrap fs-2"
        >
          HỆ THỐNG GIÁM SÁT GIAO THÔNG
        </h1>
        <h3
          class="m-5 p-5 m-lg-1 text-center badge bg-body-tertiary text-success text-wrap fs-2"
        >
          Camera Giám Sát Xe Vi Phạm Mũ Bảo Hiểm
        </h3><br />
        <h4 class="m-5"><a class="text-decoration-none" href="/Hethongcamera1"> 1. Camera Giám Sát Phương Tiện Vi Phạm Làn Đường</a> </h4>
        <h4 class="m-5"><a class="text-decoration-none" href="/thongke"> 2. Thống Kê Phương Tiện Vi Phạm</a> </h4>
        <h4 class="m-5"><a class="text-decoration-none" href="/bb"> 3 . Một Số Quy Định Giao Thông</a> </h4>
        <h4 class="m-5"><a class="text-decoration-none" href="/"> 4 . Quay Lại Trang Chủ</a> </h4>
      </div>
      <div class="steam" id="video-frame">
        <h3 class="conn d-none" id="conn-alert">No Connected</h3>
        <img
          id="steam"
          src="http://127.0.0.1:8000/camera2"
          loading="lazy"
          class="img-fluid video-stream"
          alt="..."
          style="max-width: 100%;"
        />
      </div>
    </div>
  </body>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.4/js/tether.min.js"></script>
  <script>
    function checkVideoAlive(videoUrl) {
      let video = document.getElementById("steam");
      let text = document.getElementById("conn-alert");
      let video_frame = document.getElementById("video-frame");
      video.onerror = function () {
        console.log("Video is not alive.");
        text.setAttribute("class", "conn");
        video.setAttribute("class", "img-fluid d-none");
      };

      video.onplay = function () {
        text.setAttribute("class", "conn d-none");
        console.log("Connected.");
      };
    }
    checkVideoAlive("http://127.0.0.1:8000/camera2");
  </script>
  <script>
    var loader = document.getElementById("preloader");
    window.addEventListener("load", vanish);
    function vanish() {
      loader.classList.add("display");
    }
    setTimeout(function () {
      $("#preloader").fadeToggle();
    }, 800);
  </script>
</html>
